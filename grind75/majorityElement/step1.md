### やろうとしていることを言語化してみる
数値の配列に占める割合が半数以上の数値を返すらしい。
数値が書かれたカードが何枚かあって、カードには数字が書かれており、同じ数字が書かれたカードもある。
カード全体の中で、半数以上のカードに書かれた数字を探す。

### 思考記録
適当に順番に見て、数字ごとにカードの枚数を数えてメモしていくので良さそう。
ソートしてもわかりやすそうだけど、ソートした後にどちらにせよ全探索しないといけなさそうでソートがそれほどうまくはまらなさそう。
n/2枚は必ず確認する必要があると考えると、O(N)が最低の計算量になりそうで、そうなるとメモしながら線形探索するのが良さそう。

### 計算量
#### 時間計算量
O(N)
#### 空間計算量
O(N)

### コード
```Java
class Solution {
    public int majorityElement(int[] nums) {
        int threshold = nums.length / 2;
        Map<Integer, Integer> map = new HashMap<>();

        for (int num : nums) {
            if (!map.containsKey(num)) {
                map.put(num, 0);
            }

            int count = map.get(num);
            map.put(num, ++count);
            if (count <= threshold) {
                continue;
            }

            return num;
        }
        return 0;
    } 
}
```
### かかった時間
20分

### 感想
- とりあえずコードを書いてみて、コンパイルエラーになるので無理やり最後にデフォルト値で0を返すコードを追記したが非常に違和感がある
  - なんらか値は返す必要があるので、デフォルト値を返すのは仕方ない気はする
  - しかも今回はint型を返すからnullも使えない
  - 例外が良いのかなぁ
  - Javaで一番人気のsolutionは0を返していた。
    - `int default = 0` みたいに初期化しておけば0を返してもあまり違和感ないか...？
    - `Integer.MAX_VALUE` みたいなありえない値のほうが今回は良さそうか。個人的にはこれで変数名をdefaultとかで初期化しておくのがしっくり来る。
  - このあたりChatGPTにきいたところ、予想外の値が渡される頻度に応じて多ければ例外で呼び出し元に例外処理を強制し、少なければnullなど特別な値を返すのが良いとのことで割と納得した。
- if-elseをあまり使わないほうがいいと思いすぎてしまったが、今回はmapに既にある値かどうかで処理が変わるところは単純にif-elseを使ったほうがわかりやすかったかも
- 整数値の割り算で切り上げたいときって面倒。 `a + b - 1 / b` とかやるのは個人的には直感的でないので比較演算子(<=)で調整したい。
- 今回の問題だとソートするとn/2のインデックスに答えが入ることになるというのはなるほど。自分では思いつかない視点。
- Moore's Voting Algorithm、これはなるほどとなった。
  - 過半数以上を占める値の要素ということは、その値と過半数を占めない値の要素を全体から一つずつ削除しても、引き続き同じ要素が過半数を占める。
  - また、過半数を占めない値を2つ削除しても、引き続き同じ要素が過半数を占める。
  - 故に上記の2つの動作をどのように繰り返しても最後には必ず過半数を占める要素が1つ残る。
  - この動作を擬似的に配列で再現する。
    - 配列を順に走査する
    - 過半数を占める値の候補を常に持つ
    - カウンタを用意する
    - 以下の動作を繰り返す
      - 候補と同じ値の要素を見つけたらカウンタをカウントアップする
      - 候補と違う値の要素を見つけたらカウンタをカウントダウンする
      - カウンタが0のとき、現在確認している要素を候補にする
    - 上記を繰り返して最終的に候補に残っている要素の値が過半数を占める値になる。
  - [Why Moore's Voting Algorithm works](https://www.geeksforgeeks.org/boyer-moore-majority-voting-algorithm/)